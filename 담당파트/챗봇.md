> ## 세미프로젝트 담당 파트 정리 4

<br/>

<img src="https://user-images.githubusercontent.com/75427390/147499055-ef47f908-53c9-405c-903a-9b13f7aecf3b.png" width="90%">

<br/>

페이지 우측 하단에 보이는 로봇 아이콘을 누르면 열리는 **챗봇** 코드 정리입니다.   
공공 인공지능 오픈 API의 **대화 모델링 구축 도구**(GenieDialog)를 활용해서 만들었습니다.   

<br/>
<br/>

<img src="https://user-images.githubusercontent.com/75427390/147499445-12c36eb1-bd69-45ab-9e56-231dc14c34ad.png" width="70%">

<br/>

대화는 반려동물이 섭취해도 되는 음식인지 아닌지에 대한 질의 응답과, 연계된 병원 및 가게의 예약을 할 수 있는 대화로 나누어서 설계했습니다.

<br/>

>### 1. 대화 세션 설정용 토큰 받기

<br/>

**header.jsp**   
헤더에 클릭 시 챗봇 팝업창이 열리는 아이콘 생성
```jsp
<script>
   	function openchat(){
   		var popupWidth = 400;
   		var popupHeight = 530;
   		var popupX = (window.screen.width / 2) - (popupWidth / 2);
   		var popupY= (window.screen.height / 2) - (popupHeight / 2);
    		
   		var member_no = "<%=session.getAttribute("member_no")%>";
   		if (member_no == "null") {
   			alert("로그인 후 챗봇을 이용하실 수 있습니다.");
   		} else {
   		window.open('/semi_PetDiary/chatbot.do?command=opendialog','', 'height=' + popupHeight  + ', width=' + popupWidth  + ', left='+ popupX + ', top='+ popupY + 'resizable=no');
   		}
   	}	
</script>

<a class="chatbot"><img src="${pageContext.request.contextPath}/resources/image/chatbot.png" onclick="openchat();" height="60px"></a>
```

<br/>

**chatbot_servlet.jsp**

